{
  "kind": "build_request",
  "title": "Fix voice recording transcription and Parse and Fill functionality",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Fix voice recording to place transcribed text into the Quick Fill text box instead of the Medical Record Number field",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "Immediately after stopping the recording",
          "all text was just put in the Medical Record Number field"
        ]
      },
      "acceptanceCriteria": [
        "After stopping voice recording, all transcribed text appears in the Quick Fill text box",
        "No text is automatically populated into the Medical Record Number field during recording",
        "The Quick Fill text box displays the complete transcript from the speech recognition"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Fix Parse and Fill button to accurately extract all 9 case fields from the Quick Fill text box when user speaks field names followed by values (e.g., 'Medical Record Number 12345')",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "Parse and Fill it does not complete the fields accurately",
          "Nothing is being extracted properly",
          "Start by saying the name of the field and then the data for that field"
        ]
      },
      "acceptanceCriteria": [
        "Parse and Fill button extracts Medical Record Number from text like 'Medical Record Number 12345'",
        "Parse and Fill button extracts Arrival Date and converts number sequences to Date format",
        "Parse and Fill button extracts Pet Name from spoken input",
        "Parse and Fill button extracts Owner Last Name from spoken input",
        "Parse and Fill button extracts Species and matches it to the dropdown options (canine, feline, avian, exotic)",
        "Parse and Fill button extracts Breed from spoken input",
        "Parse and Fill button extracts Sex and matches it to the dropdown options",
        "Parse and Fill button extracts Date of Birth and converts number sequences to Date format",
        "Parse and Fill button extracts Presenting Complaint from spoken input",
        "All 9 fields are populated correctly when valid data is present in the Quick Fill text box"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Enhance date parsing to intelligently convert various spoken number sequences into proper MM/DD/YYYY date format for Arrival Date and Date of Birth fields",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "Arrival Date (parse numbers in to a Date)",
          "Date of Birth (parse numbers in to a date)"
        ]
      },
      "acceptanceCriteria": [
        "Parser converts spoken dates like 'twelve fifteen twenty twenty four' to 12/15/2024",
        "Parser handles dates spoken as 'one two one five two zero two four' to 12/15/2024",
        "Parser handles dates with month names like 'December fifteen twenty twenty four'",
        "Parser handles partial dates and uses reasonable defaults for missing components",
        "Invalid date sequences are flagged or left unpopulated rather than causing errors"
      ]
    }
  ],
  "constraints": [
    "Do not modify the backend schema or main.mo file",
    "Maintain existing CaseFormDialog component structure and Quick Fill text box",
    "Keep existing useSpeechRecognition hook functionality for browser speech recognition",
    "Preserve existing parseStructuredText function signature while enhancing its logic"
  ],
  "nonGoals": [
    "Adding new case fields beyond the 9 specified fields",
    "Changing the dropdown options for Species or Sex",
    "Modifying the visual design or layout of the form",
    "Adding alternative input methods beyond voice recording and text parsing"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}