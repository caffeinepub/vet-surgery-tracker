{
  "kind": "build_request",
  "title": "Fix AuthProvider wrapper in main.tsx production build",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-2",
      "text": "Ensure AuthProvider from frontend/src/contexts/AuthContext.tsx properly wraps the App component in frontend/src/main.tsx so that the useAuth hook can access authentication context throughout the application",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "index-CtUuCriL.js:28085 Uncaught Error: useAuth must be used within an AuthProvider"
        ]
      },
      "acceptanceCriteria": [
        "No 'useAuth must be used within an AuthProvider' error appears in browser console",
        "App component successfully renders without authentication context errors",
        "AuthProvider wrapper is present in the component tree before App mounts",
        "Production build includes the AuthProvider wrapper correctly"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Verify the component hierarchy in frontend/src/main.tsx places AuthProvider outside App and inside QueryClientProvider and InternetIdentityProvider to ensure proper context nesting order",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ]
      },
      "acceptanceCriteria": [
        "AuthProvider is rendered as a child of QueryClientProvider",
        "App component is rendered as a child of AuthProvider",
        "Context providers are nested in the correct order for dependencies"
      ]
    }
  ],
  "constraints": [
    "Do not modify frontend/src/hooks/useInternetIdentity.ts as it is in the immutablePaths list",
    "Maintain single-actor backend architecture",
    "Keep all authentication logic in frontend/src/contexts/AuthContext.tsx"
  ],
  "nonGoals": [
    "Changing the authentication mechanism from username/password",
    "Modifying the AuthContext implementation",
    "Adding new authentication features"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}