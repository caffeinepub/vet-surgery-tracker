{
  "kind": "build_request",
  "title": "Add sorting for case cards by arrival date and task status",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Add a sorting control UI component to the CasesListView that allows users to select sort order with options: 'Arrival Date (Newest First)', 'Arrival Date (Oldest First)', 'Open Tasks (Most First)', and 'Open Tasks (Fewest First)'",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-latest"
        ],
        "quotes": [
          "Add a method to sort the case cards by arrival date and task status/open tasks"
        ]
      },
      "acceptanceCriteria": [
        "A visible sort dropdown or button group appears above the case cards grid",
        "Users can select between at least 4 sorting options",
        "The selected sort option persists visually while active"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Implement sorting logic that reorders the displayed case cards based on the selected sort option, using the arrivalDate field for date sorting and counting uncompleted checklist items for task status sorting",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-latest"
        ],
        "quotes": [
          "Add a method to sort the case cards by arrival date and task status/open tasks"
        ]
      },
      "acceptanceCriteria": [
        "Cases sort correctly by arrival date in ascending and descending order",
        "Cases sort correctly by number of open (uncompleted) checklist tasks in ascending and descending order",
        "Sorting updates immediately when the user changes the selection",
        "Sorting works correctly with the existing search filter"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Ensure the sorting persists when users perform other actions like searching, creating new cases, updating cases, or toggling checklist items",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-latest"
        ]
      },
      "acceptanceCriteria": [
        "The selected sort order remains active after search queries change",
        "Cases automatically re-sort when checklist items are toggled",
        "New cases appear in the correct sorted position",
        "Updated cases move to the correct sorted position"
      ]
    }
  ],
  "constraints": [
    "Do not modify the backend schema or add new backend endpoints",
    "Preserve the existing grid layout and CaseCard component structure",
    "Maintain compatibility with existing search and CSV import/export functionality"
  ],
  "nonGoals": [
    "Sorting by other fields like species, sex, or owner name",
    "Saving user's preferred sort order across sessions",
    "Multi-field sorting (e.g., first by date, then by tasks)"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}